# RAID

## En linux
```Bash
# 1) Instalar mdadm (Debian/Ubuntu)
sudo apt-get update && sudo apt-get install -y mdadm

# 2) Crear RAID 5 en /dev/md0 con 3 discos
sudo mdadm --create /dev/md0 --level=5 --raid-devices=3 /dev/sdb /dev/sdc /dev/sdd

# (Opcional) Ver progreso
cat /proc/mdstat

# 3) Formatear en ext4
sudo mkfs.ext4 /dev/md0

# 4) Montar
sudo mkdir -p /mnt/raid5
sudo mount /dev/md0 /mnt/raid5

# 5) Comprobar RAID
sudo mdadm --detail /dev/md0
```

# Copias de seguridad

- Copias de seguridad en PowerShell
```PowerShell
# Copiar archivos de un directorio a otro
Copy-Item -Path "C:\Users\Usuario\Documentos" -Destination "D:\Backup\Documentos" -Recurse -Force

# Copia incremental (solo nuevos o modificados)
$source = "C:\Users\Usuario\Documentos"
$destination = "D:\Backup\Documentos"
$files = Get-ChildItem -Path $source -Recurse | Where-Object { $_.LastWriteTime -gt (Get-Date).AddDays(-1) }
   
foreach ($file in $files) {
    $dest = Join-Path -Path $destination -ChildPath $file.FullName.Substring($source.Length)
    Copy-Item -Path $file.FullName -Destination $dest -Force
}

# Crear una copia comprimida
Compress-Archive -Path "C:\Users\Usuario\Documentos" -DestinationPath "D:\Backup\Backup_Documentos.zip"
```

- Copias de seguridad en Linux
```Bash
# Copiar archivos de un directorio a otro
cp -r /home/usuario/Documentos /media/usuario/backup_docs

# Copia incremental con `rsync`
rsync -avh --delete --ignore-existing /home/usuario/Documentos/ /media/usuario/backup_docs/

# Copia comprimida con `tar`
tar -czf /media/usuario/backup_docs/backup.tar.gz /home/usuario/Documentos

# Copiar archivos modificados recientemente con `find`
find /home/usuario/Documentos -type f -mtime -1 -exec cp {} /media/usuario/backup_docs/ \;
```

- Rsync
```Bash
rsync -avh --delete /home/usuario/Documentos/ /media/usuario/backup_docs/
rsync -avh --delete /home/usuario/Documentos/ usuario@servidor:/backup/Documentos/
rsync -avh --delete usuario@servidor:/backup/Documentos/ /home/usuario/Documentos/
rsync -avh --progress /home/usuario/Documentos/ /media/usuario/backup_docs/

# Explicación:
# -a (archive): Es una opción que combina varias funcionalidades: preserva los permisos, propietarios, fechas de modificación, enlaces simbólicos y recursividad (sin subdirectorios).
# -v (verbose): Muestra información detallada sobre los archivos transferidos.
# -h (human-readable): Muestra los tamaños de los archivos en formato legible por humanos (por ejemplo, en KB, MB, GB).
# --delete: Elimina los archivos del destino que ya no existen en el origen. Esto asegura que la copia de seguridad esté completamente sincronizada.
# /home/usuario/Documentos/: Directorio origen, donde se encuentran los archivos y directorios que queremos copiar.
# /media/usuario/backup_docs/: Directorio destino, donde se realizará la copia de seguridad.
```

# Permisos en Linux
* https://www.jesusninoc.com/11/11/script-en-powershell-para-repasar-permisos-en-linux/
