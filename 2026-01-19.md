# Unidad de seguridad
- Ufw
  - En una máquina virtual con Ubuntu, instala ufw (sudo apt install ufw). Habilítalo con sudo ufw enable. Por defecto, denegará todo el tráfico entrante. Luego, permite explícitamente el tráfico SSH con sudo ufw allow ssh. Comprueba el estado con sudo ufw status.
```Bash
sudo apt update
sudo apt install ufw
sudo ufw allow ssh
sudo ufw enable
sudo ufw status verbose
sudo ufw status numbered
sudo ufw disable
```
- Firewall_Kit https://github.com/jesusninoc/Firewall_Kit
```Bash
git clone <repositorio>
cd Firewall_Kit
chmod +x firewall.sh
```
- Auditoría y visor de sucesos
  - Auditoría. 
  - Visor de Eventos (Windows): Es la herramienta nativa de Windows para explorar los logs del sistema. Los logs de seguridad (en Registros de Windows > Seguridad) son especialmente importantes. Habilita la auditoría de inicio de sesión para poder ver quién ha intentado acceder al sistema y cuándo.
  - journalctl (Linux): En los sistemas Linux modernos que usan systemd, journalctl es el comando para consultar los logs. Puedes usarlo para filtrar por servicio (journalctl -u sshd), por nivel de prioridad (journalctl -p err) o para ver los logs en tiempo real (journalctl -f). 

# Monitorización
- En una máquina virtual con Linux, instala htop (sudo apt install htop). Ejecútalo y ordena los procesos por uso de CPU (pulsando P), por uso de memoria (pulsando M) y filtra por un usuario concreto (pulsando u). Abre otro terminal y ejecuta un comando que consuma CPU (como md5sum /dev/urandom) y observa cómo aparece en la parte superior de htop.
- En Windows, abre el Monitor de Rendimiento (perfmon). Añade los contadores "% de tiempo de procesador" (para la CPU), "Mbytes disponibles" (para la memoria) y "Longitud media de la cola de disco" para el disco C:. Observa cómo varían en tiempo real mientras abres y usas diferentes aplicaciones.
- En PowerShell: https://www.jesusninoc.com/07/11/analisis-de-procesos-y-conexiones-de-red-con-powershell/
- En Windows, abre el Visor de Eventos. Ve a Registros de Windows > Sistema. Filtra el registro actual para mostrar solo los eventos con el nivel "Error" y "Crítico" de las últimas 24 horas. Investiga uno de los errores que encuentres, copiando el "Origen" y el "ID del evento" y buscándolos en Google para entender su significado.

# Resolución incidencias
- Repaso de AD (GPO).
- En un Windows Server, instala el rol de WSUS. Configúralo para que sincronice las actualizaciones de Windows 10. Luego, crea una GPO y configúrala para que los clientes de tu dominio apunten a este servidor WSUS para buscar actualizaciones. Aplica la GPO a una OU con equipos cliente y fuerza la detección de actualizaciones en uno de ellos.
- En una máquina virtual con Windows, habilita el Escritorio Remoto. Desde tu PC anfitrión, abre el cliente de Conexión a Escritorio Remoto (mstsc.exe) e introduce la dirección IP de la máquina virtual para conectarte a ella. Experimenta la sensación de controlar la VM como si estuvieras sentado delante de ella. 
